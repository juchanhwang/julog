---
title: "TIL 200424 Cant bind input when using abstract classes 2+ level of hierarchy"
date: 2020-04-24 16:00:00
category: 'Today I Learned'
---



ë¡œì»¬ ì»´íŒŒì¼ ì‹œì ì—ì„œëŠ” ì•„ë¬´ ë¬¸ì œ ì—†ëŠ” ì½”ë“œê°€ ë°°í¬í•œ í”„ë¡œë•ì…˜ì—ì„œ ì—ëŸ¬ê°€ ë‚œë‹¤.ğŸ˜­

ë‹¹í™©ìŠ¤ëŸ½ì§€ ì•Šì„ ìˆ˜ê°€ ì—†ë‹¤... ã…ã…

ë¹Œë“œë¥¼ í•˜ê²Œ ë˜ë©´ ì“°ì§€ ì•ŠëŠ” ì½”ë“œë“¤ì„ ìë™ìœ¼ë¡œ ì‚­ì œí•˜ëŠ”ë°, AbstractComponent ì•ˆì— ìˆëŠ” inputê°’ì´ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  íŒë‹¨í•´ì„œ ì—†ì•¤ ê²ƒ ê°™ë‹¤.

### ë¬¸ì œì˜ ì½”ë“œ

- ì¶”ìƒ ì»´í¬ë„ŒíŠ¸: AbstractComponent

```ts
export abstract class AbstractComponent {
  @Input() input$: Observable<string>;
  @Input() keyEvent$: Observable<KeyboardEvent>;
  @Input() isFocused$: BehaviorSubject<boolean>;

  ngOnInit() {
    this.keyEvent$.pipe().....
  }
```

- AbstractComponentë¥¼ extendsí•˜ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸

```ts
export class PCSearchAutoComponent extends AbstractComponent {
......
}
```

```ts
export class PCSearchHistoryComponent extends AbstractComponent {
......
}
```

### ì—ëŸ¬ ë©”ì‹œì§€

- can't bind to keyEvents$ since it isn't a known property of mp-search-history

- ERROR TypeError: Cannot read property 'pipe' of undefined

  ![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ff974a99-f05e-4146-99f7-1909ad91629a/_2020-04-24__5.39.26.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ff974a99-f05e-4146-99f7-1909ad91629a/_2020-04-24__5.39.26.png)

## í•´ê²° ë°©ì•ˆ

1. ìì‹ ì»´í¬ë„ŒíŠ¸ì— input ê°’ë“¤ì„ ì„ ì–¸

```ts
export class PCSearchAutoComponent extends SearchTypeaheadInteraction {
  @Input() input$: Observable<string>;
  @Input() keyEvent$: Observable<KeyboardEvent>;
  @Input() isFocused$: BehaviorSubject<boolean>;
}
```

```ts
export class PCSearchHistoryComponent extends SearchTypeaheadInteraction {
  @Input() input$: Observable<string>;
  @Input() keyEvent$: Observable<KeyboardEvent>;
  @Input() isFocused$: BehaviorSubject<boolean>;
}
```

- ê° ìì‹ ì»´í¬ë„ŒíŠ¸ë“¤ì—ê²Œë„ `Input` ê°’ë“¤ì„ ì„ ì–¸í•´ì¤€ë‹¤.

1. ê³µí†µ ì»´í¬ë„ŒíŠ¸ì— @Directive() ë°ì½”ë ˆì´í„° ì„ ì–¸

```ts
@Directive()
export abstract class AbstractComponent {
  @Input() input$: Observable<string>;
  @Input() keyEvent$: Observable<KeyboardEvent>;
  @Input() isFocused$: BehaviorSubject<boolean>;
}
```

- AbstractComponentì— ë°ì½”ë ˆì´í„°ë§Œ ì¶”ê°€í•´ì£¼ë©´ ì‰½ê²Œ í•´ê²° í•  ìˆ˜ ìˆë‹¤.
- Angular9ë¶€í„° Angularê°€ Abstract classê°€ ì˜¬ë°”ë¥´ê²Œ ìƒì†í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê²Œ, @Directive() ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•´ì•¼í•œë‹¤.

> ì°¸ê³ 

- [Angluar Github](https://github.com/angular/angular/issues/35295)

